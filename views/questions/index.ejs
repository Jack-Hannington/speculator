<%- include('../partials/header') %>
<%- include('../partials/nav') %>

<% if (message && message.length > 0) { %>
  <div class="flash-messages-container animate__animated">
    <div class="flash-message">
      <iconify-icon icon="solar:info-circle-outline" inline class="brand-orange"></iconify-icon><%= message %>
    </div>
  </div>
<% } %>
<div class="container-xxl px-xl-4 px-0">
  <section>
    <div class="row">
      <div class="header-row col-lg-8 col-12">
        <h1>Question library</h1>
        <p>Each question has a category and scoring rules depending on the user's answer.</p>
      </div>
      <div class="col-lg-4 col-12 d-flex justify-content-lg-end align-items-start mt-2 mt-lg-0">
        <a href="/questions/create" class="btn btn-primary">+ Add question</a>
      </div>
    </div>
  </section>


<section class="mt-3">
  <% groupedQuestions.forEach(group => { %>
    
    <div class="row mb-3 mt-3">
      <div class="col-12 py-3 px-3" style="border-radius:var(--base-border-radius);background-color:#<%= group.categoryBackgroundColor %>; color: #<%= group.categoryColor %>;">
       <span class="fw-semibold"><%= group.categoryName %></span>
      </div>
    </div>
    <% group.questions.forEach(question => { %>
      <a class="unstyled" href="/questions/edit/<%= question.id %>">
      <div class="row py-lg-3 py-2 px-lg-2 px-1 font-14 clickable-row">
        <div class="col-lg-9 col-10">
          <p class="mb-0"><iconify-icon inline icon="solar:clipboard-text-outline"></iconify-icon><%= question.question %></p>
        </div>
      
      <div class="col-lg-3 col-2 d-flex justify-content-lg-end align-items-start mt-2 mt-lg-0">
        Edit
      </div>
    </div>
    </a>
    <% }) %>
  <% }) %>
  </section>
</div>

<%- include('../partials/footer') %>
